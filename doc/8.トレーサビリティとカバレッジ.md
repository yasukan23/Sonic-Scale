# トレーサビリティ

ソフトウェア開発におけるトレーサビリティとは、
開発プロセス全体を通して、成果物（要求、設計、コード、テストなど）間の関連性を明確にし、
追跡可能にすることです。

Sonic Scaleではシステム要求からテスト結果に至るトレーサビリティと
システム要求からソフトウェア実装に至るトレーサビリティの実現を目指します

### システム要求からテスト結果に至るトレーサビリティ
システム要求
-> 要求仕様書
-> テスト仕様書
-> テスト結果

### システム要求からソフトウェア実装に至るトレーサビリティ
システム要求
-> 要求仕様書
-> 設計仕様書
-> ソフトウェアコード

## トレーサビリティマトリクス

トレーサビリティマトリクスは、要求、設計、コード、テストなどの成果物間の関連性を示す表形式のドキュメントです。
この後説明する方法でトレーサビリティが実現できていれば、
トレーサビリティマトリクスは自動生成することができます。

| 要求ID | 要求記述 | 設計ID | コードID | テストID | テスト結果 |
|---|---|---|---|---|---|
| REQ-001 | ユーザーはログインできる | DEV-001 | DEV-021 | TEST-001 | PASS |
| REQ-002 | ユーザーはログアウトできる | DEV-002 | DEV-022 | TEST-002 | PASS |
| REQ-003 | ユーザーは商品を購入できる | DEV-003 | DEV-023 | TEST-003 | FAIL |

## 作業レベルのトレーサビリティ

作業レベルのトレーサビリティは、JIRAのリンク機能とGitHubとの連携によって実現します。

JIRAのシステム要求チケットから、関連する要求仕様、設計、実装、テストなどの各作業チケットへリンクを張り、関連付けを明確にします。
各作業の成果物（ソースコード、ドキュメント等）はGitHubで管理し、JIRAチケットからGitHub上の成果物を参照できるようにすることで、作業レベルでのトレーサビリティを実現します。

![トレーサビリティ](../draw.io/traceability.drawio.svg)

## ドキュメントレベルのトレーサビリティ

ドキュメントレベルのトレーサビリティはGitHubのリンク機能を使って実現します。

マークダウンで記載されたドキュメントをGitHubで公開すると、各見出しにアンカーリンク（ページ内リンク）が張られます。

このURLを別ドキュメントから参照することで、ドキュメントとドキュメントを関連づけることができます。

```
例)
# ログイン画面の画面設計仕様
参照：[ログイン画面の要求仕様](https://github.com/sonic-scale/requirement-spec/blob/v.1.0.0/screen/login-screen.md#details)
```

参照先のURLは必ずタグ名（バージョン名）を含むものにして下さい。
タグ名ではなくブランチ名で参照すると参照先が変更される可能性があります。

カバレッジは以下のように計算されます
- 要求仕様書に対する設計仕様書のカバレッジ
    - 要求仕様書の全ての見出しに対して設計仕様書から参照されている見出しの割合
- 設計仕様書に対する実装コードのカバレッジ
    - 設計仕様書の全ての見出しに対して実装コードから参照されている見出しの割合
- 要求仕様書に対するテスト仕様書のカバレッジ
    - 要求仕様書の全ての見出しに対してテスト仕様書から参照されている見出しの割合
- テストケースに対するテストコードのカバレッジ
    - テストケースの全ての見出しに対してテストコードから参照されている見出しの割合

![ドキュメント トレーサビリティ](../draw.io/document-traceability.drawio.svg)

# カバレッジ

カバレッジとは、システム要求に対し、どの程度テストが実行されたか、またはどの程度実装が進んでいるかを示す指標です。
トレーサビリティが実現されていれば、システム要求からテスト結果やソフトウェアコードにたどり着ける割合を、カバレッジとして計算できます。

## コードカバレッジ

コードカバレッジとは、ソフトウェアの単体テストにおいて、ソースコードのどの部分が実行されたかを測定する指標で、テストツールで測定することができます。
単体テストや結合テストにおけるコードカバレッジを測定することで、テストの網羅性を評価し、潜在的なバグを見つけやすくすることができます。

コードカバレッジには4種類あり、それらが全て100%に達する状態を目指します。
- C0: 命令網羅(Statement Coverage)
- C1: 分岐網羅(Branch Coverage)
- C2: 条件網羅(Condition Coverage)
- MC/DC (Modified Condition/Decision Coverage)
